\documentclass
   [kulak] % options: kul/kulak, handout (altijd kul of kulak optioneel kan handout bijgevoegd worden)
   {kulakbeamer}

\usepackage[dutch]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage{color}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathrsfs}

\newcommand\tab[1][1cm]{\hspace*{#1}}

\lstdefinestyle{CStyle}{
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2,
	language=C,
	morekeywords={parallel, spawn, sync, new}
}

\title[Simulated annealing]{Job shop scheduling by simulated annealing}
\author[T. Bamelis \& M. Jonckheere]{Thomas Bamelis \& Michiel Jonckheere} 
\institute[Kulak]{KU Leuven Kulak}
\date{Academiejaar 2017-2018}

% Overzicht bij het begin van elk hoofdstuk 
\AtBeginSection[]{\only<beamer>{\addtocounter{framenumber}{-1}
	\begin{outlineframe}[Overzicht]
		\tableofcontents[currentsection]
	\end{outlineframe}}
	}


\defbeamertemplate{description item}{align left}{\insertdescriptionitem\hfill}


\begin{document}

\begin{titleframe}
\titlepage
\end{titleframe}

\begin{outlineframe}[Overzicht]
\tableofcontents
\end{outlineframe}

 % % % Here you go  % % % 

\section{Inleiding}

\begin{frame}
\frametitle{Inleiding}
\textbf{\textit{Simulated annealing}} \\~\\
Een manier om dichtbij optimale oplossing te geven voor een combinatorisch optimalisatie probleem.\\~\\
\pause
Gebaseerd op het afkoelen van metalen. 
\end{frame}

\section[SA algemeen]{De algemene vorm van simulated annealing}

\begin{frame}
\frametitle{Gegevens}
3 benodigdheden voor SA:

\begin{enumerate}
	\item \textbf{$\mathscr{R}$} : Een verzameling configuraties / combinaties
	\item \textbf{$C: \mathscr{R} \rightarrow \mathbb{R}$}: Een functie die de `kost' van een configuratie weergeeft
	\item \textbf{$\mathscr{N}: \mathscr{R} \rightarrow 2^\mathscr{R}$} : Een functie die de `neighborhood' van een configuratie weergeeft, met $\mathscr{N}(i) \subseteq \mathscr{R}$ \\~\\
	Een simpele transitie is nodig waaruit indien toegepast op een configuratie i, alle $\mathscr{N}(i)$ hieruit kunnen volgen
\end{enumerate}
\end{frame}

\begin{frame}
	\frametitle{Algoritme SA}
	$\triangleright$ Iteratief algoritme waarin $i \in \mathscr{R}$ gegeven is bij de initialisatie. \\~\\~\\ \pause
	$\rightarrow$ Er wordt een neighbor $j \in \mathscr{N}(i)$ genomen \\~\\ \pause
	$\rightarrow$ De kans dat we met $j$ verdergaan is min\{$1,e^{\frac{-(C(j)-C(i))}{c}}$\} met $c$ een getal die daalt tijdens de uitvoering (\textit{cfr. temperatuur}).\\~\\
	\pause
	Kans daalt als:
	\begin{itemize}
		\item[$\bullet$] $C(j)-C(i)$ groot of dus j veel zwaarder
		
		\item[$\bullet$] $c$ kleiner wordt of dus tijd vordert
		
		
	\end{itemize}
	\pause
	~\\Kans 1 als $C(j) \leqslant C(i)$
	
	
\end{frame}

\begin{frame}
	\frametitle{c en aantal iteraties}
	Kies voor c begin waarde $\chi\textsubscript{0}$, eindwaard $\epsilon\textsubscript{s}$ en $\delta$
	$c\textsubscript{k+1} = \frac{c\textsubscript{k}}{1 + [c\textsubscript{k}\cdot \ln(1 + \delta)/3\cdot \sigma\textsubscript{k}]}$ \\~\\ met $\sigma\textsubscript{k}$ de standaard afwijking van de kost van de configuraties van de k'de iteratie \\~\\\pause$\rightarrow$ $\delta$ klein gekozen $\Rightarrow$ trage `kwalitatieve' afname c 
	\\~\\\pause
	We kiezen Lengte L als bovengrens van het aantal mogelijke elementen om te bereiken uit een transitie vanuit i:\\
	$L\textsubscript{k} = \displaystyle \max_{i \in \mathscr{R}}\{|\mathscr{N}(i)|\}$
\end{frame}

\begin{frame}
	\frametitle{Kwaliteit algoritme}
	
	$\triangleright$ Indien $\delta$ kleiner dan 0,1 gekozen wordt\\
	is de eindconfiguratie binnen 2\% van het globaal minimum. \\~\\
	Tijdscomplexiteit $= \mathscr{\theta}(\tau L\ln(|\mathscr{R}|))$ met $\tau$ de tijd om een nieuwe transitie door te voeren.
	
\end{frame}

\section[simpeler?]{Waarom niet simpeler}

\begin{frame}
	\frametitle{Waarom niet simpeler?}
	Wat indien men met $j$ verdergaat als $C(j) \leq C(i)$?\\~\\
	\pause
	Stel $i \in \mathscr{R}$ en $\forall j \in \mathscr{N}(i): C(j) \geqslant C(i)$ \\($i$ heeft kleinste kost van al zijn neighbors) \\
	$\Rightarrow$ je zit vast in $\mathscr{N}(j)$ \\~\\
	\pause
	SA `verplicht' om te veranderen in begin en zo niet vast te zitten
\end{frame}

\section[SA job shop]{SA toegepast op job shop scheduling}

\begin{frame}
	\frametitle{Configuraties}
	We geven hier de gegevens die SA nodig heeft door voor ons probleem.\pause 
	~\\~\\  \textbf{\textit{Configuraties}}: \\ ~\\
	De configuratie $i$ wordt weergegeven door $\Pi\textsubscript{i}$ met \\ $\Pi\textsubscript{i} = \{\pi\textsubscript{i1}, ... ,\pi\textsubscript{im}\}$
	met $\pi\textsubscript{ik}$ de volgorde waarin de operaties op machine k worden uitgevoerd. \pause	~\\~\\ $\pi\textsubscript{ik}$ moet $m\textsubscript{k}$ operaties bevatten $\Rightarrow$ $\#\mathscr{R} = \prod\limits_{k=1}^m m\textsubscript{k}!$ met m aantal machines \\~\\ Als operatie v op machine k uitvoert, dan is $\pi\textsubscript{ik}(v)$ de operatie die na v op machine k uitvoert.

\end{frame}

\begin{frame}
	\frametitle{Kost functie}
	%TODO Hier op dezelfde manier als hierboven de 2 gerichte grafen d schrijven en wat ze zijn in mensentaal en dat ze dezelfde lengte hebben
	We definiëren volgende twee grafen:\\
	\begin{enumerate}
		\item $D_i = (V, A \cup E_i)$, met $E_i = \{(v, w) | \{v, w\} \in E$ en 		$\pi_{ik}(v) = w$, voor enkele $k \in \mathscr(M)\}$\\
		\item $\bar{D_i} = (V, A \cup \bar{E_i})$, met $\bar{E_i} = \{(v, w) | \{v, w\} \in E$ en $\pi_{ik}^l(v) = w$, voor enkele $k \in \mathscr(M), 1 \le l \le m_k -1\}$
	\end{enumerate}
	~\\
	
	$\bar{D_i}$ is een disjuncte graaf met bogen uit $E$, waarvan de oriëntatie bepaald wordt door $\Pi_i$.\\ ~\\

	$D_i$ is $\bar{D_i}$ waarvan de bogen uit $\bar{E_i}$ die opeenvolgende operaties zijn van dezelfde machine.
	
	
\end{frame}

\begin{frame}
\frametitle{Kost functie}
	%TODO Zeggen dat de kostfunctie via labelingsalgoritme, normaal is dit het korste pad als alle bogen gewicht -1 krijgen
	Het langste pad van beide grafen zijn even lang. (Overige paden zijn korter of afkorting van een pad)\\~\\
	\pause
	Kost van configuratie $i$ vinden we door het langste pad van $0$ naar $N + 1$ te zoeken in $D_i$ $\rightarrow$ m.b.v. \textit{labeling algoritme}\\\tab $\rightarrow$ 
	kortste pad algoritme met gewicht boog = -1
	\\~\\
	\pause
	Aantal bogen: $|A| + |E_i| = (N + n) + (N - m)$ \\
	\tab $\Rightarrow$ $O(N)$


\end{frame}

\begin{frame}
\frametitle{Neighborhood Structuur}
	Keuze transitie:\\
	\begin{enumerate}
		\item $v$ en $w$ zijn opeenvolgende operaties op een machine $k$\\
		\item $(v, w)\in E_i$ is een kritieke boog\\ 
	\end{enumerate}
	Daarna $v$ en $w$ wisselen in uitvoering.\\
	\tab $\Rightarrow$ $(u, v)$ en $(w, x)$ wordt $(u, w)$ en $(v, x)$\\~\\
	Enkele transities dus zeker al uitsluiten:\\
	\begin{enumerate}
		\item De kost verlaagt niet na de transitie\\
		\item De transitie resulteert in een cyclic graph\\
	\end{enumerate}
	~\\
	We besluiten dus: $\mathscr{N}(i) < \Sigma_{k=1}^m (m_k - 1) = N - m$
\end{frame}

\begin{frame}
\frametitle{Convergentie}
	Via een bewijs kan aangetoond worden dat voor iedere begin configuratie $i$ een eindig aantal transities bestaat om een globaal minimale configuratie te bereiken.
\end{frame}

\section{Besluit}
\begin{frame}
\frametitle{Besluit}
SA blijft relatief simpel en vermijd de valkuil van de simpelere methode.
\end{frame}

\end{document}
